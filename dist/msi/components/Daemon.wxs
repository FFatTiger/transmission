<Wix xmlns="http://wixtoolset.org/schemas/v4/wxs" xmlns:util="http://wixtoolset.org/schemas/v4/wxs/util">
  <?include TransmissionConfig.wxi ?>

  <Fragment>
    <ComponentGroup Id="DaemonComponents" Directory="INSTALLDIR" Source="$(var.SrcDir)\bin">
      <Component>
        <File Id="exe.transmission.daemon" KeyPath="yes" Name="transmission-daemon.exe" />
        <ServiceInstall Id="exe.transmission.daemon.service" Name="Transmission" Type="ownProcess" Account="NT AUTHORITY\LocalService" Start="auto" ErrorControl="normal"
            DisplayName="Transmission Daemon" Description="Background BitTorrent service accessible with Qt client, web UI, or remote CLI tool.">
          <util:ServiceConfig FirstFailureActionType="restart" SecondFailureActionType="restart" ThirdFailureActionType="none" ResetPeriodInDays="1"
              RestartServiceDelayInSeconds="5" />
        </ServiceInstall>
        <ServiceControl Id="exe.transmission.daemon.service.ctl" Name="Transmission" Start="install" Stop="both" Remove="uninstall" />
      </Component>
    </ComponentGroup>
  </Fragment>

</Wix>
